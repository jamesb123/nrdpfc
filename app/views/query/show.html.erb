<% unless @results.blank? %>
  <table border="1" cellpadding="0" cellspacing="0">
    <thead>
      <tr>
        <% @query_builder.select_field_aliases.each do |select_field_alias| %>
          <th><%= select_field_alias.titleize %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @results.each do |result| %>
        <tr>
          <% @query_builder.select_field_aliases.each do |select_field_alias| %>
            <td><%= (r = result[select_field_alias]).blank? ? "&nbsp;-&nbsp;" : r %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

Only <%= @limit %> records shown.  Download to see all.

<h2>SQL</h2>
<pre>
<%= @sql %>
</pre>